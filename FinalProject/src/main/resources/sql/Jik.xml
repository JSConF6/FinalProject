<?xml version="1.0" encoding="UTF-8"?><!--  SQL 맵퍼 파일은 xml이기 때문에 제일 먼저 xml 선언이 옵니다. -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <mapper namespace="Jiks">
 
 	<insert id="insert" parameterType="jik">
  	
  	<selectKey keyProperty="jik_num" resultType="int" order="BEFORE">
  		select NVL(max(jik_num),0)+1 from jik
  	</selectKey>
 			INSERT INTO jik
 			(jik_num,
 			 nick, jik_subject,
 			 jik_content, jik_file, jik_original,
 			 jik_readcount,jik_date)
 			VALUES
 			 (#{jik_num},
 			  #{nick},#{jik_subject},
 			  #{jik_content},#{jik_file, jdbcType=VARCHAR},
 			  #{jik_original, jdbcType=VARCHAR},
 			  #{jik_readcount},sysdate)
 	</insert>
 
 	 <select id="count" resultType="int">
 			select count(*) from jik
 	 </select>
 	 
  	<select id="list" resultType="jik" parameterType="map">
 			select * 
 			from (select ROWNUM RNUM, b.*
				   from 
				   		(select * from jik 
						 order by jik_num DESC) b
					) 
			where		
			 <![CDATA[
			  RNUM>= #{start} and RNUM <= #{end}
 			]]>
 	</select>
 	


 	
 </mapper>